/* Select component â€“ theme via CSS variables (themes.scss loaded globally) */

.sr-select {
  &__trigger {
    position: relative;
    width: 100%;
    height: 2rem;
    padding: 0.25rem 2rem 0.25rem 0.5rem;
    font-size: 0.8125rem;
    line-height: 1.25;
    color: var(--foreground);
    background: var(--background);
    border: 1px solid var(--input);
    border-radius: 0.5rem; /* rounded-lg */
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    text-align: left;
    cursor: pointer;
    transition: border-color 0.2s, box-shadow 0.2s;

    &:focus {
      outline: none;
      border-color: var(--input);
      box-shadow: 0 0 0 2px var(--ring);
    }

    &:disabled {
      background: var(--muted);
      cursor: not-allowed;
    }

    &--open {
      border-color: var(--input);
      box-shadow: 0 0 0 2px color-mix(in oklch, var(--ring) 20%, transparent);
    }
  }

  &__trigger-inner {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    overflow: hidden;
  }

  &__chevron {
    pointer-events: none;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    padding-right: 0.5rem;
  }

  &__chip {
    display: inline-flex;
    align-items: center;
    gap: 0.125rem;
    padding: 0.0625rem 0.375rem;
    font-size: 0.6875rem;
    font-weight: 500;
    color: var(--primary);
    background: color-mix(in oklch, var(--primary) 10%, transparent);
    border: 1px solid color-mix(in oklch, var(--primary) 20%, transparent);
    border-radius: 0.375rem;
  }

  &__chip-remove {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 0.875rem;
    height: 0.875rem;
    flex-shrink: 0;
    color: color-mix(in oklch, var(--primary) 70%, transparent);
    background: transparent;
    border: none;
    border-radius: 9999px;
    cursor: pointer;
    transition: background-color 0.15s, color 0.15s;

    &:hover {
      background: color-mix(in oklch, var(--primary) 20%, transparent);
      color: var(--primary);
    }

    &:focus {
      outline: none;
    }
  }

  &__chip-more {
    display: inline-flex;
    align-items: center;
    padding: 0.0625rem 0.375rem;
    font-size: 0.6875rem;
    font-weight: 500;
    color: var(--muted-foreground);
    background: var(--muted);
    border: 1px solid var(--border);
    border-radius: 0.375rem;
  }

  &__panel {
    position: absolute;
    z-index: 1000;
    left: 0;
    right: 0;
    max-height: 14rem;
    overflow: hidden;
    padding: 0.25rem 0;
    color: var(--popover-foreground);
    background: var(--popover);
    border: 1px solid var(--border);
    border-radius: 0.5rem; /* rounded-lg */
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);

    &--bottom {
      top: 100%;
      margin-top: 0.5rem;
      transform-origin: top;
      animation: sr-select-open 0.2s ease-out forwards;
    }

    &--top {
      bottom: 100%;
      margin-bottom: 0.5rem;
      transform-origin: bottom;
      animation: sr-select-open 0.2s ease-out forwards;
    }

    &--closing {
      &.sr-select__panel--bottom {
        animation: sr-select-close 0.15s ease-in forwards;
      }
      &.sr-select__panel--top {
        animation: sr-select-close-top 0.15s ease-in forwards;
      }
    }
  }

  &__search-wrap {
    position: sticky;
    top: 0;
    z-index: 10;
    padding: 0.375rem 0.5rem;
    background: var(--popover);
    border-bottom: 1px solid var(--border);
  }

  &__search-icon {
    pointer-events: none;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    display: flex;
    align-items: center;
    padding-left: 0.5rem;
  }

  &__search-input {
    display: block;
    width: 100%;
    padding: 0.25rem 0.5rem 0.25rem 2rem;
    font-size: 0.8125rem;
    color: var(--foreground);
    background: var(--background);
    border: 1px solid var(--input);
    border-radius: 0.375rem;

    &::placeholder {
      color: var(--muted-foreground);
    }

    &:focus {
      outline: none;
      border-color: var(--input);
      box-shadow: 0 0 0 2px var(--ring);
    }
  }

  &__list {
    max-height: 12rem;
    overflow: auto;
    padding: 0.125rem;
  }

  &__option {
    position: relative;
    padding: 0.375rem 2rem 0.375rem 0.5rem;
    font-size: 0.8125rem;
    color: var(--foreground);
    cursor: default;
    user-select: none;
    border-radius: var(--radius-lg);
    transition: background-color 0.15s, color 0.15s;

    &:hover {
      background: var(--accent);
      color: var(--accent-foreground);
    }
  }

  &__option-check {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    padding-right: 0.5rem;
    color: var(--primary);
  }

  &__empty {
    padding: 0.5rem;
    font-size: 0.8125rem;
    color: var(--muted-foreground);
    text-align: center;
  }

  &__clear {
    padding: 0.375rem 0.5rem;
    background: color-mix(in oklch, var(--muted) 30%, transparent);
    border-top: 1px solid var(--border);
    cursor: pointer;
    transition: background-color 0.15s;

    &:hover {
      background: color-mix(in oklch, var(--muted) 50%, transparent);
    }
  }
}

@keyframes sr-select-open {
  from {
    opacity: 0;
    transform: scale(0.96);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes sr-select-close {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.96);
  }
}

@keyframes sr-select-close-top {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.96);
  }
}
