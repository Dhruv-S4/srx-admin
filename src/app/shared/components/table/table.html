<div class="rounded-2xl border border-border bg-card shadow-sm">
  <div class="-mb-px overflow-x-auto overflow-hidden rounded-t-2xl">
    <table class="min-w-full border-collapse">
      <thead>
        <tr class="border-b border-border bg-muted/60">
          @for (header of headers; track $index) {
            <th class="whitespace-nowrap py-3.5 text-left text-xs font-semibold uppercase tracking-wider text-muted-foreground first:pl-6 last:pr-6" [title]="header.tooltip || header.name">
              <div class="inline-flex items-center gap-2">
                <span>{{ header.name }}</span>
                @if (header.tooltip) {
                  <span class="inline-block size-1.5 rounded-full bg-muted-foreground/50" aria-hidden="true"></span>
                }
              </div>
            </th>
          }
        </tr>
      </thead>

      @if (data && data.length > 0) {
        <tbody>
          @for (row of data; track $index; let i = $index) {
            <tr class="border-b border-border/80 text-sm text-foreground transition-colors duration-150 hover:bg-muted/50 last:border-b-0">
              <ng-container *ngTemplateOutlet="rowTemplate; context: { $implicit: row, index: i }"></ng-container>
            </tr>
          }
        </tbody>
      } @else {
        <tbody>
          <tr class="border-b-0 hover:bg-transparent">
            <td class="px-6 py-16 text-center" attr.colspan="{{ headers.length }}">
              <div class="mx-auto flex max-w-sm flex-col items-center justify-center gap-2 text-muted-foreground">
                <div class="text-base font-semibold text-foreground">No data yet</div>
                <div class="text-sm leading-relaxed">There are no uploads to show. Upload a file to get started.</div>
              </div>
            </td>
          </tr>
        </tbody>
      }
    </table>
  </div>

  @if (paginationRequired) {
    <div class="flex flex-col gap-4 overflow-visible rounded-b-2xl border-t border-border bg-muted/20 px-5 py-4 lg:flex-row lg:items-center lg:justify-between">
      <div class="inline-flex items-center gap-2.5">
        <span class="text-sm font-medium text-muted-foreground">Items per page</span>
        <app-select
          class="min-w-[4.5rem] w-[5.5rem]"
          [options]="pageSizeSelectOptions()"
          [value]="rowsPerPage()"
          placeholder="Items per page"
          (selectionChange)="changeRowsPerPage($event)"
        />
      </div>

      <div class="flex flex-wrap items-center gap-1.5">
        <button
          type="button"
          class="inline-flex items-center justify-center gap-1.5 rounded-lg px-2.5 py-1.5 text-sm font-medium text-foreground transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50"
          [disabled]="currentPage() === 1"
          (click)="previousPage()"
          title="Previous"
        >
          <ng-icon name="lucideChevronLeft" class="size-5 shrink-0" />
          <span>Previous</span>
        </button>

        <div class="flex flex-wrap items-center gap-0.5">
          @for (p of displayedPages(); track $index) {
            @if (p === '...') {
              <span class="px-1.5 text-sm text-muted-foreground">â€¦</span>
            } @else {
              <button
                type="button"
                class="inline-flex h-9 min-w-[2.25rem] items-center justify-center rounded-lg text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-foreground"
                [ngClass]="{ 'bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground': currentPage() === p }"
                (click)="goToPage(p)"
              >
                {{ p }}
              </button>
            }
          }
        </div>

        <button
          type="button"
          class="inline-flex items-center justify-center gap-1.5 rounded-lg px-2.5 py-1.5 text-sm font-medium text-foreground transition-colors hover:bg-accent hover:text-accent-foreground disabled:cursor-not-allowed disabled:opacity-50"
          [disabled]="currentPage() >= totalPages"
          (click)="nextPage()"
          title="Next"
        >
          <span>Next</span>
          <ng-icon name="lucideChevronRight" class="size-5 shrink-0" />
        </button>
      </div>
    </div>
  }
</div>

